/* ===========================
   Cookie banner – styles
   =========================== */

@use "sass:map";

/* --------- Thèmes (multi-variants) --------- */
$cookie-themes: (
  "default": (bg:#ffffff, text:#111827, muted:#6b7280, line:#e5e7eb, surface:#f3f4f6, accent:#18a60b),
  "brown":   (bg:#ffffff, text:#1f2937, muted:#6b7280, line:#e5e7eb, surface:#f8f5f2, accent:#8b5e3c),
  "dark":    (bg:#0b1220, text:#e5e7eb, muted:#94a3b8, line:#1f2937, surface:#141b2b, accent:#9b6b5a),
  "blue":    (bg:#ffffff, text:#0f172a, muted:#475569, line:#e2e8f0, surface:#f1f5f9, accent:#2563eb)
);

/* Mixin : inchangé */
@mixin cookie-vars($vars) {
  --cc-bg:      #{map.get($vars, bg)};
  --cc-text:    #{map.get($vars, text)};
  --cc-muted:   #{map.get($vars, muted)};
  --cc-line:    #{map.get($vars, line)};
  --cc-surface: #{map.get($vars, surface)};
  --cc-accent:  #{map.get($vars, accent)};
}

/* Thème par défaut :root */
:root{
  @include cookie-vars(map.get($cookie-themes, "default"));
  --cc-border: var(--cc-line);
}

/* Génère .cookie-theme-<name> */
@each $name, $vars in $cookie-themes {
  .cookie-theme-#{$name} { @include cookie-vars($vars); }
}

/* --------- Composant cookies --------- */

/* Carte en bas à droite */
.pmcpli-cookiebanner {
  position: fixed;
  right: 18px;
  bottom: 18px;
  z-index: 99999;
  background: var(--cc-bg);
  color: var(--cc-text);
  width: 520px;
  max-width: calc(100vw - 24px);
  max-height: calc(100vh - 24px);
  border: 1px solid var(--cc-border);
  border-radius: 10px;
  box-shadow: 0 14px 28px rgba(0,0,0,.22), 0 10px 10px rgba(0,0,0,.18);
  display: grid;
  grid-template-rows: auto 1fr auto;
  padding: 14px 16px;
  overflow: hidden;
}

/* Header */
.pmcpli-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.pmcpli-title{ font-weight:700; font-size:16px; line-height:1.2; }
.pmcpli-close{ cursor:pointer; color:#6b7280; }
.pmcpli-close:hover{ color:#374151; }
.pmcpli-close-icon{ width:18px; height:18px; }

/* Séparateurs */
.pmcpli-divider{ height:1px; background: var(--cc-line); margin:10px 0; }

/* Corps (SNIPPET demandé) */
@media (min-width: 350px) {
  .pmcpli-cookiebanner .pmcpli-body { min-width: 300px; }
}
.pmcpli-cookiebanner .pmcpli-body {
  grid-column: span 3;
  max-height: 55vh;
  overflow-x: hidden;
  overflow-y: auto;
  width: 100%;
}

/* Texte d’intro */
.pmcpli-message{ color: var(--cc-muted); font-size:14px; }

/* Catégories : CACHÉES PAR DÉFAUT (ouvertes uniquement après clic "Les préférences") */
.pmcpli-cookiebanner .pmcpli-categories{ display: none; }

/* Bloc catégorie */
.pmcpli-category{
  background: var(--cc-surface);
  border-radius: 8px;
  padding: 6px 8px;
  margin: 8px 0;
}
.pmcpli-category > summary{
  list-style:none; cursor:pointer;
  display:flex; align-items:center; justify-content:space-between; gap:8px;
}
.pmcpli-category > summary::-webkit-details-marker{ display:none; }

.pmcpli-category-header{
  width:100%;
  display:grid;
  grid-template-columns: 1fr auto 20px; /* titre | switch | caret */
  align-items:center;
  gap:10px;
}
.pmcpli-category-title{ font-weight:600; }

/* Chevron fermé par défaut, pivote quand <details open> */
.pmcpli-category .pmcpli-open{ display:inline-flex; transform:rotate(0deg); transition:transform .2s ease; }
.pmcpli-category[open] .pmcpli-open{ transform:rotate(180deg); }

/* Texte de description */
.pmcpli-description{ margin-top:8px; color:#4b5563; font-size:14px; line-height:1.55; }
.pmcpli-description ul{ margin:.5rem 0 .25rem 1.25rem; }

/* Switchs (input + label) */
.checkbox-wrapper{ position:relative; }
.checkbox-wrapper input[type=checkbox]{ position:absolute; height:0; width:0; visibility:hidden; }
.checkbox-wrapper label{
  --size:31px;
  cursor:pointer;
  width:var(--size);
  height:calc(var(--size)/2);
  background:#DDD;
  display:block;
  border-radius:100px;
  position:relative;
  transition:background .25s ease;
}
.checkbox-wrapper label::after{
  content:'';
  position:absolute;
  top:6%;
  left:2.5%;
  width:calc(50% - 3%);
  height:calc(100% - 11%);
  background:#fff;
  border-radius:90px;
  box-shadow:0 1px 2px rgba(0,0,0,.2);
  transition:all .25s ease;
}
.checkbox-wrapper label:active::after{ width:55%; }
.checkbox-wrapper input:checked + label{ background: var(--cc-accent); }
.checkbox-wrapper input:checked + label::after{
  left:calc(100% - 2.5%);
  transform:translateX(-100%);
}

/* Boutons */
.pmcpli-buttons{ display:flex; flex-wrap:wrap; gap:10px; margin-top:10px; }
.pmcpli-btn{
  border:1px solid var(--cc-line);
  background:#fff; color:#374151;
  border-radius:8px; padding:10px 14px;
  font-weight:600; cursor:pointer;
}
.pmcpli-accept{ background: var(--cc-accent); color:#fff; border-color: var(--cc-accent); }
.pmcpli-deny{ background:#f9fafb; }
.pmcpli-save-preferences{ background:#eef2f7; }

/* Liens */
.pmcpli-cookiebanner a{ color:inherit; text-decoration:none; }
.pmcpli-cookiebanner a:hover{ text-decoration:underline; }

/* Responsive */
@media (max-width: 640px){
  .pmcpli-cookiebanner{ right:12px; left:12px; bottom:12px; width:auto; }
  .pmcpli-buttons{ flex-direction:column; }
}
